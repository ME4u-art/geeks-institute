
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
                /*Exercise 1 : Giphy API #2*/ 
        const FetchGif = async(api) => {
    try{
        const response = await fetch(api)
        if(!response.ok){
            throw new Error(`Somthing went worng: ${response.status}`)
        }else{
            const data = await response.json()
            console.log("data",data)
            const gifsArray = data.data;
            const randmIndex = Math.floor(Math.random()*gifsArray.length);
            const randomGif = gifsArray[randmIndex];

            const gifUrl = randomGif.images.original.url;
            const img = document.createElement("img");
            img.src = gifUrl;
            img.alt = randomGif.title;
            document.body.appendChild(img)
        }
    }catch(err){
        console.error("Error fitching api giphy",err)
    }
}

FetchGif("https://api.giphy.com/v1/gifs/search?q=hilarious&rating=g&api_key=hpvZycW22qCjn5cRM1xtWB8NKq4dQ2My")


        /*Exercise 2 : Analyze #2*/

    /*
    outcomes:
    ==SEQUENTIAL START==
    starting slow promise
    slow promise is done 
    slow 
    starting fast promise
    fast promise is done 
    fast 
    */

        /*Exercise 3 : Analyze #3*/

        /*
        outcomes:
        ==CONCURRENT START with await==
        starting slow promise
        starting fast promise
        fast promise is done
        slow promise is done
        slow 
        fast
        */

    /*Exercise 4 : Modify fetch with Async/Await*/

    const urls = [
        "https://jsonplaceholder.typicode.com/users",
        "https://jsonplaceholder.typicode.com/posts",
        "https://jsonplaceholder.typicode.com/albums"
      ];

    const getData = async function() {
         try {
    
    const promises = urls.map(async (url) => {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      const data = await response.json();
      return data;
    });

    const [users, posts, albums] = await Promise.all(promises);

    console.log('users', users);
    console.log('posts', posts);
    console.log('albums', albums);

  } catch (err) {
    console.log('ooooooops');
  }
}

getData()

    </script>
</body>
</html>